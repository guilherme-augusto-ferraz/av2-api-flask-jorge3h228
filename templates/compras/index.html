{% extends 'base.html' %}

{% block content %}
  <section class="add-form">
    <h2>Adicionar produto</h2>
    <form class="form-grid" action="{{ url_for('compras.adicionar') }}" method="post">
      <div class="field full">
        <label for="descricao">Descrição</label>
        <input id="descricao" placeholder="Ex: Detergente" type="text" name="descricao" required>
      </div>
      <div class="field">
        <label for="valor">Valor</label>
        <input id="valor" placeholder="0.00" type="number" step="0.01" name="valor">
      </div>
      <div class="field">
        <label for="categoria">Categoria</label>
        <input id="categoria" placeholder="Ex: Limpeza" type="text" name="categoria">
      </div>
      <div class="field">
        <label for="data">Data</label>
        <input id="data" name="data" type="date">
      </div>
      <div class="field full actions-row">
        <button type="submit" class="btn">Adicionar</button>
      </div>
    </form>
  </section>

  <section class="lista">
    <h2>Produtos ({{ status }})</h2>

    {% if compras %}
      <ul class="compras-list">
        {% for c in compras %}
          <li class="compra {% if c.comprado %}comprado{% else %}pendente{% endif %}">
            <div class="left">
              <strong>{{ c.descricao }}</strong>
              <div class="meta">Categoria: {{ c.categoria or '-' }} • Valor: {{ c.valor or '-' }} • Data: {{ c.data or '-' }}</div>
            </div>
            <div class="actions">
              {% if c.comprado %}
                <span class="cart-check" title="No carrinho">✓</span>
              {% endif %}
              <a class="btn small" href="{{ url_for('compras.concluir', compra_id=c.id) }}">{% if c.comprado %}Remover do carrinho{% else %}Adicionar ao carrinho{% endif %}</a>
              <a class="btn small edit" href="{{ url_for('compras.editar', compra_id=c.id) }}">Editar</a>
              <a class="btn small danger" href="{{ url_for('compras.remover', compra_id=c.id) }}">Remover</a>
            </div>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>Nenhuma compra encontrada.</p>
    {% endif %}
  </section>

{% endblock %}
